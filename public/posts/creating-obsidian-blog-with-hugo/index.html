<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Creating Obsidian blog with Hugo :: ILXNAH&#39;s den</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content=" Following a video from NetworkChuck, then freestyling it to GitHub Pages.
Paths (using raw strings to handle Windows backslashes correctly) posts_dir = r&quot;C:\Users\ilona\Documents\ILXNAH.github.io\content\posts&quot; attachments_dir = r&quot;C:\Users\ilona\Documents\obsidian\Attachments&quot; static_images_dir = r&quot;C:\Users\ilona\Documents\ILXNAH.github.io\static\images&quot;
Step 1: Process each markdown file in the posts directory for filename in os.listdir(posts_dir): if filename.endswith(&quot;.md&quot;): filepath = os.path.join(posts_dir, filename)
with open(filepath, &quot;r&quot;, encoding=&quot;utf-8&quot;) as file:content = file.read()# Step 2: Find all image links in the format ![Image Description](/images/Pasted%20image%20...%20.png)images = re.findall(r&#39;\[\[([^]]*\.(?:png|jpg|jpeg))\]\]&#39;, content)# Step 3: Replace image links and ensure URLs are correctly formattedfor image in images:# Prepare the Markdown-compatible link with %20 replacing spacesmarkdown_image = f&quot;![Image Description](/images/{image.replace(&#39; &#39;, &#39;%20&#39;)})&quot;content = content.replace(f&quot;[[{image}]]&quot;, markdown_image)# Step 4: Copy the image to the Hugo static/images directory if it existsimage_source = os.path.join(attachments_dir, image)if os.path.exists(image_source):shutil.copy(image_source, static_images_dir)# Step 5: Write the updated content back to the markdown filewith open(filepath, &quot;w&quot;, encoding=&quot;utf-8&quot;) as file:file.write(content)print(&ldquo;Markdown files processed and images copied successfully.&rdquo;)
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="/posts/creating-obsidian-blog-with-hugo/" />





  
  <link rel="stylesheet" href="/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="/css/terminal.min.4b367d85d0d0061435650561285afed36c46a7cf8dc6d7ed5642d98e589fa622.css">

  
  <link rel="stylesheet" href="/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">




<link rel="stylesheet" href="/style.css">


<link rel="icon" href="/icons/taco.png">
<link rel="apple-touch-icon" href="/icons/taco.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Creating Obsidian blog with Hugo">
<meta property="og:description" content=" Following a video from NetworkChuck, then freestyling it to GitHub Pages.
Paths (using raw strings to handle Windows backslashes correctly) posts_dir = r&quot;C:\Users\ilona\Documents\ILXNAH.github.io\content\posts&quot; attachments_dir = r&quot;C:\Users\ilona\Documents\obsidian\Attachments&quot; static_images_dir = r&quot;C:\Users\ilona\Documents\ILXNAH.github.io\static\images&quot;
Step 1: Process each markdown file in the posts directory for filename in os.listdir(posts_dir): if filename.endswith(&quot;.md&quot;): filepath = os.path.join(posts_dir, filename)
with open(filepath, &quot;r&quot;, encoding=&quot;utf-8&quot;) as file:content = file.read()# Step 2: Find all image links in the format ![Image Description](/images/Pasted%20image%20...%20.png)images = re.findall(r&#39;\[\[([^]]*\.(?:png|jpg|jpeg))\]\]&#39;, content)# Step 3: Replace image links and ensure URLs are correctly formattedfor image in images:# Prepare the Markdown-compatible link with %20 replacing spacesmarkdown_image = f&quot;![Image Description](/images/{image.replace(&#39; &#39;, &#39;%20&#39;)})&quot;content = content.replace(f&quot;[[{image}]]&quot;, markdown_image)# Step 4: Copy the image to the Hugo static/images directory if it existsimage_source = os.path.join(attachments_dir, image)if os.path.exists(image_source):shutil.copy(image_source, static_images_dir)# Step 5: Write the updated content back to the markdown filewith open(filepath, &quot;w&quot;, encoding=&quot;utf-8&quot;) as file:file.write(content)print(&ldquo;Markdown files processed and images copied successfully.&rdquo;)
" />
<meta property="og:url" content="/posts/creating-obsidian-blog-with-hugo/" />
<meta property="og:site_name" content="ILXNAH&#39;s den" />

  <meta property="og:image" content="/icons/taco.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-01-28 08:20:38 &#43;0000 UTC" />













  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <script>
    (function() {
      
      var currentTheme = localStorage.getItem('theme') || 'default';
      
      document.documentElement.setAttribute('data-theme', currentTheme);
    })();
  </script>

  
  <style>
    body {
      visibility: hidden;  
      opacity: 0;  
      transition: opacity 0.3s ease;  
    }
  </style>

  
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  

  <div class="container full">

    <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Hello World!
  </div>
</a>

    </div>
    
	<button id="theme-toggle" aria-label="Toggle Theme">
	  <img src="/icons/moon.png" alt="Moon Icon">
	</button>      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/showcase" >Showcase</a></li>
        
      
      
    
  </ul>

  
</nav>

  
</header>


    <div class="content">
      
<article class="post">
  <h1 class="post-title">
    <a href="/posts/creating-obsidian-blog-with-hugo/">Creating Obsidian blog with Hugo</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-01-28
</time></div>

  
    <span class="post-tags">
      
      #<a href="/tags/powershell/">PowerShell</a>&nbsp;
      
      #<a href="/tags/python/">Python</a>&nbsp;
      
      #<a href="/tags/networkchuck/">NetworkChuck</a>&nbsp;
      
      #<a href="/tags/hugo/">Hugo</a>&nbsp;
      
      #<a href="/tags/obsidian/">Obsidian</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <hr>
<p>Following a <a href="https://www.youtube.com/watch?v=dnE7c0ELEH8">video from NetworkChuck</a>, then freestyling it to GitHub Pages.</p>
<!-- raw HTML omitted -->
<h1 id="paths-using-raw-strings-to-handle-windows-backslashes-correctly">Paths (using raw strings to handle Windows backslashes correctly)<a href="#paths-using-raw-strings-to-handle-windows-backslashes-correctly" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>posts_dir = r&quot;C:\Users\ilona\Documents\ILXNAH.github.io\content\posts&quot;
attachments_dir = r&quot;C:\Users\ilona\Documents\obsidian\Attachments&quot;
static_images_dir = r&quot;C:\Users\ilona\Documents\ILXNAH.github.io\static\images&quot;</p>
<h1 id="step-1-process-each-markdown-file-in-the-posts-directory">Step 1: Process each markdown file in the posts directory<a href="#step-1-process-each-markdown-file-in-the-posts-directory" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>for filename in os.listdir(posts_dir):
if filename.endswith(&quot;.md&quot;):
filepath = os.path.join(posts_dir, filename)</p>
<pre><code>    with open(filepath, &quot;r&quot;, encoding=&quot;utf-8&quot;) as file:
        content = file.read()

    # Step 2: Find all image links in the format ![Image Description](/images/Pasted%20image%20...%20.png)
    images = re.findall(r'\[\[([^]]*\.(?:png|jpg|jpeg))\]\]', content)

    # Step 3: Replace image links and ensure URLs are correctly formatted
    for image in images:
        # Prepare the Markdown-compatible link with %20 replacing spaces
        markdown_image = f&quot;![Image Description](/images/{image.replace(' ', '%20')})&quot;
        content = content.replace(f&quot;[[{image}]]&quot;, markdown_image)

        # Step 4: Copy the image to the Hugo static/images directory if it exists
        image_source = os.path.join(attachments_dir, image)
        if os.path.exists(image_source):
            shutil.copy(image_source, static_images_dir)

    # Step 5: Write the updated content back to the markdown file
    with open(filepath, &quot;w&quot;, encoding=&quot;utf-8&quot;) as file:
        file.write(content)
</code></pre>
<p>print(&ldquo;Markdown files processed and images copied successfully.&rdquo;)</p>
<pre tabindex="0"><code>- added image for testing purposes of the part of the script we just did:
	![Image Description](/images/Pasted%20image%2020250131130510.png)
#### Pushing code into GitHub
- create GitHub repo with name `ILXNAH.github.io` and set visibility to public
- you will need an SSH key, which you can generate with `ssh-keygen -t rsa -b 4096 -C &#34;ILXNAH@tutanota.com&#34;` if you don&#39;t have one yet
- this keypair (public and private key) will be created in dir `~/.ssh`
- within that dir, to add pubkey to GitHub, copy its content displayed via `cat .\id_rsa.pub`
- GitHub &gt; Settings &gt; SSH &gt; New key &gt; paste in there
- test that it&#39;s working on your PC with cmd `ssh -T git@github.com`
- in your blog dir, `git remote add origin git@github.com:ILXNAH/ILXNAH.github.io.git` to define the remote repo (the one you created on GitHub) aka add it to your local setup &gt; `git branch -M main`
- type `hugo` to make sure website has been built
- `git add .` to add all changes
- `git commit -m &#34;First commit&#34;` to commit those changes (locally)
- `git push -u origin main` to push from local to remote repo
	(specified is: first, name of your remote repo `origin`, then branch name `main`)
#### Deploying to GitHub Pages
1. on repo website, go to Settings &gt; Pages &gt; Source: GitHub Actions
2. in your local repo, add folder &#34;`.github`&#34;
3. within there, create a folder called &#34;`workflows`&#34;
4. within there, create a &#34;`hugo.yaml`&#34; file
5. copy workflow code into `hugo.yaml` from [Hugo&#39;s official documentation](https://gohugo.io/hosting-and-deployment/hosting-on-github/)
6. `git add .` &gt; `git commit -m &#34;github actions&#34;` &gt; `git push`
##### Publishing Workflow
1. `robocopy &#34;C:\Users\ilona\Documents\obsidian\Hugo Posts&#34; &#34;C:\Users\ilona\Documents\ILXNAH.github.io\content\posts&#34; /mir`
2. `python images.py`
3. `hugo`
4. (to view - can be skipped) `hugo serve --noHTTPCache`
	- use this flag to avoid site refresh being stuck due to cache (if you&#39;re editing in real-time)
	- you can create alias: `hss=&#39;hugo serve --noHTTPCache&#39;`
5. `git add .` &gt; `git commit -m &#34;change&#34;` &gt; `git push`
#### Final automation script in PowerShell
The below script automates the publishing workflow steps above (apart from preview):
```powershell
# Set variables for Obsidian to Hugo copy
$sourcePath = &#34;C:\Users\ilona\Documents\obsidian\Hugo Posts&#34;
$destinationPath = &#34;C:\Users\ilona\Documents\ILXNAH.github.io\content\posts&#34;

# Set Github repo 
$myrepo = &#34;git@github.com:ILXNAH/ILXNAH.github.io.git&#34;

# Set error handling
$ErrorActionPreference = &#34;Stop&#34;
Set-StrictMode -Version Latest

# Change to the script&#39;s directory
$ScriptDir = Split-Path -Parent $MyInvocation.MyCommand.Definition
Set-Location $ScriptDir

# Check for required commands
$requiredCommands = @(&#39;git&#39;, &#39;hugo&#39;)

# Check for Python command (python or python3)
if (Get-Command &#39;python&#39; -ErrorAction SilentlyContinue) {
    $pythonCommand = &#39;python&#39;
} elseif (Get-Command &#39;python3&#39; -ErrorAction SilentlyContinue) {
    $pythonCommand = &#39;python3&#39;
} else {
    Write-Error &#34;Python is not installed or not in PATH.&#34;
    exit 1
}
foreach ($cmd in $requiredCommands) {
    if (-not (Get-Command $cmd -ErrorAction SilentlyContinue)) {
        Write-Error &#34;$cmd is not installed or not in PATH.&#34;
        exit 1
    }
}

# Step 1: Check if Git is initialized, and initialize if necessary
if (-not (Test-Path &#34;.git&#34;)) {
    Write-Host &#34;Initializing Git repository...&#34;
    git init
    git remote add origin $myrepo
} else {
    Write-Host &#34;Git repository already initialized.&#34;
    $remotes = git remote
    if (-not ($remotes -contains &#39;origin&#39;)) {
        Write-Host &#34;Adding remote origin...&#34;
        git remote add origin $myrepo
    }
}

# Step 2: Sync posts from Obsidian to Hugo content folder using Robocopy
Write-Host &#34;Syncing posts from Obsidian...&#34;
if (-not (Test-Path $sourcePath)) {
    Write-Error &#34;Source path does not exist: $sourcePath&#34;
    exit 1
}
if (-not (Test-Path $destinationPath)) {
    Write-Error &#34;Destination path does not exist: $destinationPath&#34;
    exit 1
}

# Use Robocopy to mirror the directories
$robocopyOptions = @(&#39;/MIR&#39;, &#39;/Z&#39;, &#39;/W:5&#39;, &#39;/R:3&#39;)
$robocopyResult = robocopy $sourcePath $destinationPath @robocopyOptions
if ($LASTEXITCODE -ge 8) {
    Write-Error &#34;Robocopy failed with exit code $LASTEXITCODE&#34;
    exit 1
}

# Step 3: Process Markdown files with Python script to handle image links
Write-Host &#34;Processing image links in Markdown files...&#34;
if (-not (Test-Path &#34;images.py&#34;)) {
    Write-Error &#34;Python script images.py not found.&#34;
    exit 1
}

# Execute the Python script
try {
    &amp; $pythonCommand images.py
} catch {
    Write-Error &#34;Failed to process image links.&#34;
    exit 1
}

# Step 4: Build the Hugo site
Write-Host &#34;Building the Hugo site...&#34;
try {
    hugo
} catch {
    Write-Error &#34;Hugo build failed.&#34;
    exit 1
}

# Step 5: Add changes to Git
Write-Host &#34;Staging changes for Git...&#34;
$hasChanges = (git status --porcelain) -ne &#34;&#34;
if (-not $hasChanges) {
    Write-Host &#34;No changes to stage.&#34;
} else {
    git add .
}

# Step 6: Commit changes with a dynamic message
$commitMessage = &#34;Blog Update on $(Get-Date -Format &#39;yyyy-MM-dd HH:mm:ss&#39;)&#34;
$hasStagedChanges = (git diff --cached --name-only) -ne &#34;&#34;
if (-not $hasStagedChanges) {
    Write-Host &#34;No changes to commit.&#34;
} else {
    Write-Host &#34;Committing changes...&#34;
    git commit -m &#34;$commitMessage&#34;
}

# Step 7: Push all changes to the main branch
Write-Host &#34;Pushing to GitHub Main...&#34;
try {
    git push origin main
} catch {
    Write-Error &#34;Failed to push to Main branch.&#34;
    exit 1
}

Write-Host &#34;All done! Site synced, processed, committed, built, and deployed.&#34;
</code></pre>
      </div></div>

  
    

  

  
    

  
</article>

    </div>

    
      <footer class="footer">
  <div class="footer__inner">
    
    <div class="footer__item copyright">
      
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
      
    </div>

    
    <div class="footer__item footer-theme">
      <span><a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by 
      <a href="https://github.com/panr" target="_blank">panr</a></span>
    </div>

    
    <div class="footer__item footer-credit">
      <span><a href="https://www.freepik.com/sticker/taco_9282565#fromView=popular&page=1&position=68&uuid=da7f4e5b-952f-4da8-82d7-9a9f0482748d">Icon by Stickers</a></span>
    </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





<style>
   
  .footer, .footer__inner, .footer .copyright, .footer-credit {
    margin: 0;
    padding: 0;
  }

   
  .footer .copyright span,
  .footer-credit span {
    margin-right: 5px;  
    padding: 0;
  }

   
  .footer-credit {
    margin-left: 5px;   
  }
</style>

    
  </div>

  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      
      document.body.style.visibility = 'visible'; 
      document.body.style.opacity = 1;
    });
  </script>

  
  <script src="/js/theme-toggle.js" defer></script>
</body>
</html>